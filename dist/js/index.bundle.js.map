{"version":3,"file":"index.bundle.js","sources":["../../src/ts/model/Duration.ts","../../src/ts/model/Task.ts","../../src/ts/model/store.ts","../../src/ts/components/ResizeyInput.tsx","../../src/ts/components/TaskView.tsx","../../src/ts/components/TaskTree.tsx","../../src/ts/components/App.tsx","../../src/ts/index.tsx"],"sourcesContent":["export class Duration {\n  constructor(public start = 0, public end = start) { }\n\n  stringify() {\n    const start = Duration.toRoundedString(this.start)\n    const end = Duration.toRoundedString(this.end);\n    return start === end ? start : `${start}-${end}`;\n  }\n\n  toWeeksString() {\n    const startWk = Duration.toRoundedString(this.start / 40)\n    const endWk = Duration.toRoundedString(this.end / 40);\n    return startWk === endWk ? startWk : `${startWk}-${endWk}`;\n  }\n\n  serialize() {\n    return {\n      start: this.start,\n      end: this.end,\n    };\n  }\n\n  private static toRoundedString(num: number): string {\n    return String(Math.round(num * 100) / 100)\n  }\n\n  static sum(...summands: (Duration | null)[]) {\n    let start = 0;\n    let end = 0;\n    for (const summand of summands) {\n      if (!summand) continue;\n      start += summand.start;\n      end += summand.end;\n    }\n    return new Duration(start, end);\n  }\n\n  static parse(raw: string) {\n    const matches = /^\\s*([\\d\\.]+)(?:\\s*-\\s*([\\d\\.]+))?\\s*$/.exec(raw);\n    if (!matches)\n      return new Duration();\n    return new Duration(+matches[1], +(matches[2] || matches[1]));\n  }\n}\n","import { Duration } from './Duration';\n\nexport class Task {\n  children: Task[] = [];\n  constructor(public description = '', private _time: Duration | null = null) { }\n\n  get time(): Duration | null {\n    if (this.children.length) {\n      return Duration.sum(...this.children.map(child => child.time));\n    } else {\n      return this._time;\n    }\n  }\n\n  set time(newTime: Duration | null) {\n    if (this.children.length) {\n      throw new Error('Cannot set time on a parent task');\n    }\n    this._time = newTime;\n  }\n\n  // Redux seems to do an equality check and won't render if it's the same object :(\n  duplicate(): Task {\n    const task = new Task(this.description, this._time);\n    task.children = this.children;\n    return task;\n  }\n\n  serialize(): SerializedTask {\n    return {\n      description: this.description,\n      time: this.time?.serialize() ?? null,\n      children: this.children.map(child => child.serialize()),\n    };\n  }\n\n  static deserialize(serialized: string | SerializedTask): Task {\n    const pojo = typeof serialized === 'string' ? JSON.parse(serialized) as SerializedTask : serialized;\n    const task = new Task(pojo.description, pojo.time && new Duration(pojo.time.start, pojo.time.end));\n    for (const pojoChild of pojo.children) {\n      task.children.push(Task.deserialize(pojoChild));\n    }\n    return task;\n  }\n\n  static getDefault(): Task {\n    const root = new Task('Total');\n    root.children.push(new Task('Task 1', new Duration(0.5, 1.5)));\n    root.children.push(new Task('Task 2', new Duration(2)));\n    return root;\n  }\n}\n","import * as Redux from 'redux';\nimport * as ReactRedux from 'react-redux';\n\nimport { Task } from './Task';\nimport { Duration } from './Duration';\n\nfunction defaultState(): PEState {\n  const serialized = window.localStorage.getItem('timeEstimate');\n\n  let rootTask: Task;\n  if (serialized) {\n    rootTask = Task.deserialize(serialized);\n  } else {\n    rootTask = Task.getDefault();\n  }\n\n  return { rootTask, exporting: false };\n}\n\nfunction reducer(state: PEState = defaultState(), action: PEAction.Action): PEState {\n  const newState = { ...state };\n\n  // Redux won't rerender tree if rootTask is the same object\n  // Sigh... this is the kind of hack that I switched to Redux to avoid\n  const forceTreeRender = () => {\n    newState.rootTask = state.rootTask.duplicate();\n  };\n\n  if(action.type === 'CREATE_SUBTASK') {\n    if(action.parentTask.children.length) {\n      action.parentTask.children.push(new Task());\n    } else {\n      // If it's the first child, copy parent's time\n      action.parentTask.children.push(new Task('', action.parentTask.time));\n    }\n    forceTreeRender();\n  }\n\n  if(action.type === 'DELETE_TASK') {\n    action.parentTask.children = action.parentTask.children.filter(t => t != action.task);\n    forceTreeRender();\n  }\n\n  if(action.type === 'UPDATE_TASK_DESCRIPTION') {\n    action.task.description = action.value;\n    forceTreeRender();\n  }\n\n  if(action.type === 'UPDATE_TASK_TIME') {\n    action.task.time = action.value;\n    forceTreeRender();\n  }\n\n  if(action.type === 'EXPORT') {\n    newState.exporting = true;\n  }\n\n  if(action.type === 'EXPORT_END') {\n    newState.exporting = false;\n  }\n\n  if(action.type === 'RESET') {\n    newState.rootTask = Task.getDefault();\n  }\n\n  return newState;\n}\n\nfunction mapStateToProps(state: PEState): ReducerPropsStatePart {\n  return {\n    rootTask: state.rootTask,\n    exporting: state.exporting,\n  }\n}\n\nfunction matchDispatchToProps(dispatch: Redux.Dispatch<PEAction.Action>): ReducerPropsDispatchPart {\n  return {\n    onCreateSubtask: (parentTask: Task) => dispatch({ type: 'CREATE_SUBTASK', parentTask }),\n    onDeleteTask: (task: Task, parentTask: Task) => dispatch({ type: 'DELETE_TASK', task, parentTask }),\n    onUpdateTaskDescription: (task: Task, value: string) => dispatch({ type: 'UPDATE_TASK_DESCRIPTION', task, value }),\n    onUpdateTaskTime: (task: Task, value: Duration | null) => dispatch({ type: 'UPDATE_TASK_TIME', task, value }),\n    onExport: () => dispatch({ type: 'EXPORT' }),\n    onReset: () => dispatch({ type: 'RESET' }),\n  };\n}\n\nexport function createPEStore() {\n  const store = Redux.createStore(reducer);\n  store.subscribe(() => {\n    window.localStorage.setItem('timeEstimate', JSON.stringify(store.getState().rootTask.serialize()));\n  });\n  return store;\n}\n\nexport const connect = ReactRedux.connect(mapStateToProps, matchDispatchToProps);","import * as React from 'react';\n\n// https://css-tricks.com/auto-growing-inputs-textareas/\nexport const ResizeyInput: React.FC<React.HTMLProps<HTMLInputElement>> = (props) => {\n  return (\n    <span className=\"input-wrap\">\n      <span className=\"width-machine\" aria-hidden=\"true\">{props.value}</span>\n      <input {...props}/>\n    </span>\n  );\n}","import * as React from 'react';\n\nimport { Duration } from '../model/Duration';\nimport { connect } from '../model/store';\nimport { Task } from '../model/Task';\nimport { ResizeyInput } from './ResizeyInput';\n\ninterface TaskViewProps extends ReducerProps {\n  parentTask: Task | null;\n  task: Task;\n}\n\nexport const TaskView = connect(({task, ...props}: TaskViewProps): JSX.Element => {\n  const [timeInputValue, setTimeInputValue] = React.useState<string | null>(null);\n  const childrenRef = React.useRef<HTMLUListElement | null>(null);\n  let children = null;\n  if (task.children.length) {\n    children = (\n      <ul className=\"task-children\" ref={childrenRef}>\n        {task.children.map((childTask, idx) => (\n          <TaskView\n            parentTask={task}\n            task={childTask}\n            key={idx} />\n        ))}\n      </ul>\n    );\n  }\n\n  if (props.exporting) {\n    const exportText = task.time\n      ? props.parentTask\n        ? `${task.description} - ${task.time.stringify() ?? 0} hrs`\n        : `${task.description} - ${task.time.stringify() ?? 0} hrs, or ${task.time.toWeeksString()} wks`\n      : task.description;\n    return (\n      <li className=\"task\">\n        <div className=\"task-row\">\n          {exportText}\n      </div>\n        {children}\n      </li>\n    );\n  }\n\n  const deleteButton = props.parentTask ?  (\n    <button\n      name=\"delete-task\"\n      type=\"button\"\n      onClick={() => props.onDeleteTask(task, props.parentTask!)}\n    >&#x1F5D1; Delete</button>\n  ) : null;\n\n  const timeBlur = () => {\n    const asDuration = timeInputValue ? Duration.parse(timeInputValue) : null;\n    props.onUpdateTaskTime(task, asDuration);\n    setTimeInputValue(null);\n  }\n  const createSubtask = () => {\n    props.onCreateSubtask(task);\n    window.requestAnimationFrame(() => {// I miss setState callbacks...\n      if (childrenRef.current) {\n        const inputs = childrenRef.current.querySelectorAll('input[name=\"description\"]') as NodeListOf<HTMLInputElement>;\n        if (inputs && inputs.length) {\n          inputs[inputs.length - 1].focus();\n        }\n      }\n    });\n  }\n  let hrsLabelText = 'hrs)';\n  if (!props.parentTask && task.time) {\n    hrsLabelText = `hrs, or ${task.time.toWeeksString()} wks)`;\n  }\n  return (\n    <li className=\"task\">\n      <div className=\"task-row\">\n        <ResizeyInput\n          name=\"description\"\n          placeholder=\" \"\n          value={task.description}\n          onChange={(ev: React.ChangeEvent<HTMLInputElement>) => props.onUpdateTaskDescription(task, ev.currentTarget.value)} />\n        &nbsp;\n        <span className=\"color-accent\">(</span>\n        <ResizeyInput\n          name=\"time\"\n          disabled={!!task.children.length}\n          placeholder=\"0\"\n          value={timeInputValue ?? task.time?.stringify()}\n          onChange={(ev: React.ChangeEvent<HTMLInputElement>) => setTimeInputValue(ev.currentTarget.value)}\n          onFocus={(ev: React.FocusEvent<HTMLInputElement>) => setTimeInputValue(ev.currentTarget.value)}\n          onBlur={timeBlur} />\n        <span className=\"color-accent\">&nbsp;{hrsLabelText}</span>\n        <div className=\"task-buttons\">\n          <button\n            name=\"add-subtask\"\n            type=\"button\"\n            onClick={createSubtask}\n          >&#x2795; Add Sub-Task</button>\n          {deleteButton}\n        </div>\n      </div>\n      {children}\n    </li>\n  );\n});","import * as React from 'react';\n\nimport { connect } from '../model/store';\nimport { TaskView } from './TaskView';\n\nexport const TaskTree = connect((props: ReducerProps): JSX.Element => {\n  const confirmReset = () => {\n    const answer = window.confirm('Are you sure you\\'d like to reset? You\\'ll lose any un-exported work.');\n    if (answer) props.onReset();\n  }\n  return (\n    <div>\n      <ul id=\"taskTree\">\n        <TaskView\n          task={props.rootTask}\n          parentTask={null}\n        />\n      </ul>\n      <div id=\"bottom-buttons\">\n        <button onClick={props.onExport}>&#x1F4CB; Copy</button>\n        <button onClick={confirmReset}>&#x26A0;&#xFE0F; Reset</button>\n      </div>\n    </div>\n  );\n});\n","import * as React from 'react';\n\nimport { connect } from '../model/store';\nimport { TaskTree } from './TaskTree';\n\nexport const App: React.FC = () => (\n  <div>\n    <h1>&#x23F0; Project Time Estimator &#x23F0;</h1>\n    <p>A tool to estimate how much time a project will take. Click the &#x2795; button to add a sub-task, give it a description, and then enter how much time it'll take (which can be a range in the form <code>start-end</code>).</p>\n    <TaskTree />\n  </div>\n);\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport * as ReactRedux from 'react-redux';\n\nimport { createPEStore } from './model/store';\nimport { App } from './components/App';\n\nconst store = createPEStore();\n\nstore.subscribe(() => {\n\n  // Are there any situations where this might run multiple times? I guess that wouldn't be the end of the world...\n  if (store.getState().exporting) {\n    window.requestAnimationFrame(() => {\n      const el = document.querySelector(\"#taskTree\")!;\n      const range = document.createRange();\n      const selection = window.getSelection();\n      if (!selection) {\n        console.log(\"selection does not exist!\");\n        store.dispatch({ type: 'EXPORT_END' });\n        return;\n      }\n      range.selectNode(el);\n      selection.addRange(range);\n      document.execCommand('copy');\n      selection.removeRange(range);\n      store.dispatch({ type: 'EXPORT_END' });\n    });\n  }\n});\n\nReactDOM.render(\n  <ReactRedux.Provider store={store}>\n    <App />\n  </ReactRedux.Provider>,\n  document.querySelector(\"#app\")\n);"],"names":["Redux.createStore","ReactRedux.connect","React.createElement","React.useState","React.useRef","ReactDOM.render","ReactRedux.Provider"],"mappings":"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"}